<Page x:Class="MusicMediaPlayer.View.MySong"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:MusicMediaPlayer.View"
      mc:Ignorable="d" 
      xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
      TextElement.Foreground="{DynamicResource MaterialDesignBody}"
      TextElement.FontWeight="Regular"
      TextElement.FontSize="13"
      TextOptions.TextFormattingMode="Ideal"
      TextOptions.TextRenderingMode="Auto"
      FontFamily="{DynamicResource MaterialDesignFont}"
      d:DesignHeight="640" d:DesignWidth="734"
      Title="My Song"
      xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
      x:Name="SongWD"
      DataContext="{StaticResource SongVM}"
      >

    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding LoadData}"
                                   CommandParameter="{Binding ElementName=SongWD}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>

    <Grid Background="Transparent"
          Margin="5"
          Width="734"
          Height="640">
        <Border CornerRadius="20" 
                        BorderBrush="White"
                        BorderThickness="5"
                        Background="#eff2f7"
                        Grid.Column="1" MaxHeight="640" MaxWidth="734"/>
        <StackPanel>
            <StackPanel Orientation="Horizontal">
                <Label Content="My Song"
                   FontWeight="SemiBold"
                   Margin="20,10,0,0"
                   Foreground="#121518"
                   FontSize="24"></Label>
                <Button Style="{StaticResource MaterialDesignRaisedButton}"
                        Width="50"
                        Margin="5,15,0,0"
                        ToolTip="Resource name: MaterialDesignRaisedButton">
                    <materialDesign:PackIcon Kind="Magnify" />
                </Button>
            </StackPanel>
            
            <Separator Background="Gray"
                       Opacity="0.4"
                       Width="700"
                       materialDesign:ShadowAssist.ShadowEdges="Bottom"></Separator>
            <StackPanel Orientation="Horizontal">
                <Label Content="Number songs"
                       FontSize="14"
                       VerticalAlignment="Bottom"
                       Foreground="#121518"
                       FontWeight="SemiBold"
                       Margin="20,0,0,0"></Label>
                <TextBox x:Name="SongFilter"
                          Width="400"
                          Margin="10,20,0,0"
                          Background="White"
                          materialDesign:HintAssist.Hint="Search"
                          >
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="TextChanged">
                            <i:InvokeCommandAction Command="{Binding FilterChangeValue}"
                                   CommandParameter="{Binding ElementName=SongWD}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBox>
                
                <Button
                          Command="{Binding AddSong}"
                          CommandParameter="{Binding ElementName=SongWD}"
                          Margin="5,15,0,0"
                          Content="{materialDesign:PackIcon Plus}"
                          ToolTip="Add" />
                <Button
                          Margin="5,15,0,0"
                          Content="{materialDesign:PackIcon Refresh}"
                          ToolTip="Refresh" 
                          Command="{Binding Refresh}"
                          CommandTarget="{Binding ElementName=SongWD}">

                </Button>

            </StackPanel>

            <ScrollViewer VerticalScrollBarVisibility="Auto"
                              CanContentScroll="True"
                          Margin="0,0,0,0">
                <ListView Margin="0" Name="ListSong"
                              Height="450"
                              Width="700"
                              ItemsSource="{Binding List}" 
                              SelectedItem="{Binding SelectedItem}"
                              SelectionMode="Single"
                              >
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Name" 
                                            Width="150"
                                            DisplayMemberBinding="{Binding SongTitle}" />
                            <GridViewColumn Header="Aritist" 
                                            Width="150" 
                                            DisplayMemberBinding="{Binding Artist}"/>
                            <GridViewColumn Header="Times" 
                                            Width="100" 
                                            DisplayMemberBinding="{Binding Times}"/>
                            <GridViewColumn Header="Favourite" 
                                            Width="120">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <ToggleButton
                                            Style="{StaticResource MaterialDesignFlatPrimaryToggleButton}"
                                            ToolTip="MaterialDesignFlatPrimaryToggleButton"
                                            IsChecked="{Binding IsFavourite}"
                                            Command="{Binding Source={StaticResource SongVM},Path=ChangeFavourite}"
                                            CommandParameter="{Binding}"
                                                >
                                            <materialDesign:PackIcon
                                                Kind="Heart"
                                                Height="21"
                                                Width="21" />
                                        </ToggleButton>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>

                            <GridViewColumn Width="150">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Button Content="Sửa">
                                            </Button>
                                            <Button x:Name="Del"
                                                    Content="Xóa"
                                                    Command="{Binding Source={StaticResource SongVM}, Path=DeleteSong}"
                                                    CommandParameter="{Binding}">
                                            </Button>

                                        </StackPanel>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                        
                        </GridView>
                    </ListView.View>
                </ListView>

            </ScrollViewer>

            <StackPanel >
                <StackPanel>
                    <StatusBarItem HorizontalContentAlignment="Stretch">
                        <Slider Name="sliProgress" 
                            Width="350"
                            Style="{StaticResource MaterialDesignDiscreteSlider}"
                            ToolTip="MaterialDesignDiscreteSlider"
                             >
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="ValueChanged">
                                    <i:InvokeCommandAction Command="{Binding ChangeTime}"
                                   CommandParameter="{Binding ElementName=SongWD}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>

                        </Slider>
                    </StatusBarItem>
                    <StackPanel Orientation="Horizontal"
                                Margin="0,-10,0,0">
                        <Label
                            Height="25"
                            x:Name="InTime"
                            Margin="160,0,0,0"></Label>
                        <Label
                            Height="25"
                            x:Name="TotalTime"
                            Margin="340,0,0,0"></Label>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal"
                                Margin="550,-40,0,0">
                        <Button
                          x:Name="SpeakerHigh"
                          Width="50"
                          Background="Transparent"
                          BorderThickness="0"
                          Command="{Binding Mute}"
                          Content="{materialDesign:PackIcon VolumeHigh}">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseEnter">
                                    <i:InvokeCommandAction Command="{Binding ShowVolume}"
                                   CommandParameter="{Binding ElementName=SongWD}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </Button>
                        <Button
                          x:Name="SpeakerMedium"
                          Width="50"
                          Margin="-50,0,0,0"
                          Visibility="Hidden"
                          Background="Transparent"
                          BorderThickness="0"
                          Command="{Binding Mute}"
                          Content="{materialDesign:PackIcon VolumeMedium}">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseEnter">
                                    <i:InvokeCommandAction Command="{Binding ShowVolume}"
                                   CommandParameter="{Binding ElementName=SongWD}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </Button>
                        <Button
                          x:Name="SpeakerLow"
                          Width="50"
                          Margin="-50,0,0,0"
                          Visibility="Hidden"
                          Background="Transparent"
                          BorderThickness="0"
                          Command="{Binding Mute}"
                          Content="{materialDesign:PackIcon VolumeLow}">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseEnter">
                                    <i:InvokeCommandAction Command="{Binding ShowVolume}"
                                   CommandParameter="{Binding ElementName=SongWD}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </Button>
                        <Button
                          x:Name="SpeakerOff"
                          Width="50"
                          Margin="-50,0,0,0"
                          Visibility="Hidden"
                          Background="Transparent"
                          BorderThickness="0"
                          Command="{Binding NonMute}"
                          Content="{materialDesign:PackIcon VolumeOff}">
                        </Button>
                        
                        <materialDesign:TransitioningContent OpeningEffect="{materialDesign:TransitionEffect ExpandIn}">
                            <Slider 
                                 x:Name="Volume" 
                                 Width="100" 
                                 Height="30" 
                                 Maximum="1"
                                 Value="1"
                                 Visibility="Visible"
                                 VerticalAlignment="Bottom">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="ValueChanged">
                                        <i:InvokeCommandAction Command="{Binding ChangeVolumn}"
                                   CommandParameter="{Binding ElementName=SongWD}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </Slider>
                        </materialDesign:TransitioningContent>
                    </StackPanel>
                       
                </StackPanel>
                
                
                <StackPanel Orientation="Horizontal">
                    

                </StackPanel>
                <StackPanel Orientation="Horizontal"
                            Margin="180,-10,0,0">
                    <ToggleButton
                            x:Name="RandomLoop"
                            Style="{StaticResource MaterialDesignFlatPrimaryToggleButton}"
                            ToolTip="MaterialDesignFlatPrimaryToggleButton"
                            IsChecked="False"
                            Margin="0,0,5,0"
                            Command="{Binding ShuffleVariant}"
                            CommandParameter="{Binding ElementName=SongWD}"
                                                >
                        <materialDesign:PackIcon
                                                Kind="ShuffleVariant"
                                                Height="21"
                                                Width="21" />
                    </ToggleButton>
                    <Button
                          Command="{Binding SkipPrevious}"
                          Margin="0,0,5,0"
                          Content="{materialDesign:PackIcon SkipPrevious}"
                          ToolTip="Next" />
                    <Button
                          x:Name="Play"
                          Command="{Binding Play}"  
                          Margin="5,0,0,0"
                          Content="{materialDesign:PackIcon Play}"
                          ToolTip="Play" />
                    <Button
                          x:Name="Pause"
                          Command="{Binding Pause}"
                          Margin="10,0,0,0"
                          Content="{materialDesign:PackIcon Pause}"
                          ToolTip="Pause" />
                    <Button
                          Command="{Binding Stop}"           
                          Margin="10,0,0,0"
                          Content="{materialDesign:PackIcon Stop}"
                          ToolTip="Stop" />
                    <Button
                          Command="{Binding SkipNext}"
                          Margin="10,0,0,0"
                          Content="{materialDesign:PackIcon SkipNext}"
                          ToolTip="Next" />
                    <ToggleButton
                            x:Name="SequencecyLoop"
                            Style="{StaticResource MaterialDesignFlatPrimaryToggleButton}"
                            ToolTip="MaterialDesignFlatPrimaryToggleButton"
                            IsChecked="True"
                            Margin="0,0,5,0"
                            Command="{Binding ShuffleDisabled}"
                            CommandParameter="{Binding ElementName=SongWD}"
                                                >
                        <materialDesign:PackIcon
                                                Kind="ShuffleDisabled"
                                                Height="21"
                                                Width="21" />
                    </ToggleButton>
                    <ToggleButton
                            x:Name="OneLoop"
                            Style="{StaticResource MaterialDesignFlatPrimaryToggleButton}"
                            ToolTip="MaterialDesignFlatPrimaryToggleButton"
                            IsChecked="False"
                            Margin="0,0,5,0"
                            Command="{Binding Loop}"
                            CommandParameter="{Binding ElementName=SongWD}"
                                                >
                        <materialDesign:PackIcon
                                                Kind="Loop"
                                                Height="21"
                                                Width="21" />
                    </ToggleButton>
                </StackPanel>
            </StackPanel>
        </StackPanel>
    </Grid>
</Page>
